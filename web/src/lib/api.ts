export const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:4000';export async function req(path:string,opts:RequestInit={}){const r=await fetch(`${API_URL}${path}`,{headers:{'Content-Type':'application/json',...(opts.headers||{})},...opts});if(!r.ok) throw new Error(await r.text());const ct=r.headers.get('content-type')||'';return ct.includes('application/json')?r.json():r.text()}export const api={hotel:(slug:string)=>req(`/hotels?slug=${encodeURIComponent(slug)}`),services:(tenantId:string)=>req(`/catalog/services?tenant=${tenantId}`),menu:(tenantId:string)=>req(`/menu/items?tenant=${tenantId}`),createTicket:(d:any)=>req('/tickets',{method:'POST',body:JSON.stringify(d)}),createOrder:(d:any)=>req('/orders',{method:'POST',body:JSON.stringify(d)}),folio:(b:string)=>req(`/folio?booking=${b}`),precheck:(d:any)=>req('/precheck',{method:'POST',body:JSON.stringify(d)}),regcard:(d:any)=>req('/regcard',{method:'POST',body:JSON.stringify(d)}),checkout:(d:any)=>req('/checkout',{method:'POST',body:JSON.stringify(d)})};